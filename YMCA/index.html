<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Fun With Sensors</title>

  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="css/blog-post.css" rel="stylesheet">

  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/arduino.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

</head>

<body>

  <!-- Navigation -->
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
    <!-- <a class="navbar-brand" href="#">Nishita Sinha - Physical Sciences 70</a>-->
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item active">
            <a class="nav-link" href="../index.html">Home
              <span class="sr-only">(current)</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../AboutMe/index.html">About Me</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../FinalProject/index.html">Final Project</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Contact</a>
          </li>
        </ul>
      </div>
    </div>
  </nav> 
  <div class="container">

    <div class="row">

      <!-- Post Content Column -->
      <div class="col-lg-8">

        <!-- Title -->
        <h1 class="mt-4">Fun With Output Devices!</h1>

        <!-- Author 
        <p class="lead">
          by
          <a href="#">Start Bootstrap</a>
        </p>

        <hr> -->

        <!-- Date/Time -->
        <p>Week 7, Output Devices</p>

        <hr>

        <!-- Video of Final Project-->
        <iframe width="560" height="315" src="https://www.youtube.com/embed/vxhXGJGLk1c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        <p> Turn your volume on! Here's a video snippet of my final project! Let me explain how I got there....</p>
        <hr>

        <!-- Post Content -->
        <p class="lead">What you see above is the "end result" of my project that involved playing with multiple output devices. Outpute devices are essentially components that do something that you can see, hear, feel, etc. when you tell them to. Examples of these output devices are LEDs, LED Strips, motors, ~fancy motors~ like servo motors, buzzers, and so much more!</p>

        <p>Last week, I wanted to program a buzzer to play the YMCA, so I figured that this week, that would be a cool place to start. So, I acquired a Piezo buzzer, and got started</p>

        <h3> The Hardware </h3>

        <p>The first thing we have to do correctly is connect the buzzer on a breadboard to your arduino. Buzzers work by essentially inputting voltage from some power source and "modulating" this voltage to create a sound. This is a modulation between high and low voltage, which helps us produce a sound wave, an example of which is shown below. The pitch of the note we hear depends on how fast these modulation occur. This is known as the frequency. </p>

        <img src="./soundwave.png" class="img-responsive margin" style="width:20%" alt="sound wave">

        <p> Understanding that we need some means to control input voltage level, it makes sense that we are connecting one side (the positive side) of the buzzer to an output pit on our arduino, through a resistor, and the other side of the buzzer to ground. This circuit is shown below, </p>

        <img src="./circuit.jpg" class="img-responsive margin" style="width:20%" alt="buzzer circuit">

        <h3>The Code</h3>

        <p>The backbone for the code that you should use for any song you want to play using a piezo buzzer and your itsy bitsy is essentially 1) initialize the buzzer and what arduino pin it is on, 2) define a myTone function that modulates voltage between high and low at some frequency that is inputted into the function, and 3) play notes of this frequency for some certain duration of time.</p>

        <p>The hard part is determining what frequencies to play notes at. I decided that I wanted my buzzer to play the YMCA, so the next step was determnining which frequencies to play</p>

        <p> I'm a pianist, so I can read sheet music. So, I found a sheet music of the YMCA online. This provided me with the lengths of the notes (I decided one quarter note would be 500 milliseconds).... but wait how do I determine the frequency of the notes?</p>

        <img src="./sheetmusic.png" class="img-responsive margin" style="width:20%" alt="sheet music">

        <p> Each piano note has a different frequency. A good one to know is the A note right above middle C has a frequency of 440 Hz. For the rest of the notes, frequency can be calculated as a function of the number of half steps from this A. Luckily, Wikipedia has a table of all the frequencies of each piano key. </p>

        <a href="#">A Table of Frequencies</a>

        <p> So, using this table and the sheet music I was able to code the tune for YMCA into my buzzer. One tip for coding is that if you want the buzzer to play the same note twice in a row, add a delay of around 25 milliseconds in your code and subtract this time from the length of the previous note. Otherwise, the buzzer will play the notes as one continuous long note </p>

       

        <p> And here's the buzzer actually playing the YMCA in circuit! </p>

        <iframe width="560" height="315" src="https://www.youtube.com/embed/Oy-ON9x6ero" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>



        <h3> More Output Devices Yay! </h3>

        <p> Thursday in class, we spent time talking about other output devices, including motors. One the motors that excited me the most was the Servo Motor, which moves to a certain angle position, instead of just rotating continuously. </p>

        <p> To write the code for a servo motor, you need to include the servo library. This provides functions that move the motor to certain positions. The code will send the motor to the position as soon as possible, so if you want the motor to move slower, use a for loop with some delays and a smaller step size for more of a rotation </p>

        <p> To attach a servo motor to your arduino, one pin needs to be attached to high voltage, another to an arduino output pin, and the third to ground. Essentially, current flowing through this arduino output pin acts as a gate allowing the servo motor to move, but shuts off once the servo motor gets to the desired position. </p>

        <img src="./servo.jpg" class="img-responsive margin" style="width:20%" alt="Servo Motor Circuit">

        <p> My first attempt using a servo motor only attempted to get it to rotate, and here's the result: </p>

       
        <img src="./servovideo.gif" class="img-responsive margin" style="width:20%" alt="Servo motor video">


        <h3> Combining Buzzer and Motor </h3>

        <p> To combine these two lovely output devices, I decided that the servo motor should move to a new position everytime a note is played by the buzzer. I thought this would be a fun dancing-motor to add to the song. </p>

        <p> But what should determine what position the motor is sent to? The frequency of the note seemed like a good option! Maybe I could link the movement of the motor directly into the playing of a sound and the degree of the movement could be based on the frequency. </p>

        <p> Frequency doesn't correlate exactly to angle, but I realized that my frequencies went between 293 to 793 Hertz and my angle goes between 0 and 180 degrees. This means that the frequency range is 2.72 times larger than the angle range. So, by subtracting the frequency by 293 and dividing it by 2.72, I could map it to an angle degree between 0 and 180. I also realized that this mapping should be the opposite in some sense since the motor moves counter clockwise, and I thought it would look cooler if the motor was able to show the frequency increasing from left to right. So, I mapped the angle as angle = 180 - (frequency - 293)/2.72. </p>


        <p> I added a line that would move the servo motor within my myTone function directly, before the voltage modulation starts, so that this motor moves at the same time as the note starts playing </p>

        <p> I then made it a cute little frequency meter with a marker and some paper! Check out the final product below :) </p>

       <iframe width="560" height="315" src="https://www.youtube.com/embed/vxhXGJGLk1c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>



        <hr>

       

      <!-- Sidebar Widgets Column -->
      <div class="col-md-4">

        <!-- Search Widget -->
        <div class="card my-4">
          <h5 class="card-header">Search</h5>
          <div class="card-body">
            <div class="input-group">
              <input type="text" class="form-control" placeholder="Search for...">
              <span class="input-group-btn">
                <button class="btn btn-secondary" type="button">Go!</button>
              </span>
            </div>
          </div>
        </div>

        <!-- Categories Widget -->
        <div class="card my-4">
          <h5 class="card-header">Categories</h5>
          <div class="card-body">
            <div class="row">
              <div class="col-lg-6">
                <ul class="list-unstyled mb-0">
                  <li>
                    <a href="#">Web Design</a>
                  </li>
                  <li>
                    <a href="#">HTML</a>
                  </li>
                  <li>
                    <a href="#">Freebies</a>
                  </li>
                </ul>
              </div>
              <div class="col-lg-6">
                <ul class="list-unstyled mb-0">
                  <li>
                    <a href="#">JavaScript</a>
                  </li>
                  <li>
                    <a href="#">CSS</a>
                  </li>
                  <li>
                    <a href="#">Tutorials</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- Side Widget -->
        <div class="card my-4">
          <h5 class="card-header">Side Widget</h5>
          <div class="card-body">
            You can put anything you want inside of these side widgets. They are easy to use, and feature the new Bootstrap 4 card containers!
          </div>
        </div>

      </div>

    </div>
    <!-- /.row -->

  </div>
  <!-- /.container -->

  <!-- Footer -->
  <footer class="py-5 bg-dark">
    <div class="container">
      <p class="m-0 text-center text-white">Copyright &copy; Your Website 2019</p>
    </div>
    <!-- /.container -->
  </footer>

  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

</body>

</html>
